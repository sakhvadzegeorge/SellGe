<div class="loader-container" *ngIf="loading">
  <div class="loader"></div>
</div>

<section class="wishlist-container" *ngIf="!loading">

  <div *ngIf="errorMessage" class="error-message"
    style="color: red; padding: 10px; background: #ffeeee; margin: 10px 0;">
    {{ errorMessage }}
  </div>

  <div class="circle circle-one"></div>

  <h1>WISHLIST</h1>

  <table class="styled-table" *ngIf="wishlist.items.length > 0; else emptyWishlist">
    <thead>
      <tr>
        <th>PICTURE</th>
        <th>NAME</th>
        <th>QUANTITY</th>
        <th>PRICE</th>
        <th>MOVE</th>
        <th>DELETE</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let item of wishlist.items; trackBy: trackByItem">
        <td>
          <img [src]="item.picture" class="item-image" alt="{{ item.name }}" />
        </td>

        <td>{{ item.name }}</td>

        <td class="qty-box">
          <button class="qty-btn" (click)="changeQuantity(item.itemId, item.quantity - 1)"
            [disabled]="processing || item.quantity <= 1">-</button>

          <span class="qty-value">{{ item.quantity }}</span>

          <button class="qty-btn" (click)="changeQuantity(item.itemId, item.quantity + 1)"
            [disabled]="processing">+</button>
        </td>

        <td>${{ item.totalPrice }}</td>

        <td>
          <button class="move-btn" (click)="moveItemToCart(item.itemId)" [disabled]="processing">MOVE</button>
        </td>

        <td>
          <button class="delete-button" (click)="removeItem(item.itemId)" [disabled]="processing">âœ•</button>
        </td>
      </tr>
    </tbody>
  </table>

  <ng-template #emptyWishlist>
    <div class="empty-wrapper">
      <h2 class="empty">Your wishlist is empty</h2>
    </div>
  </ng-template>

  <div class="wishlist-actions" *ngIf="wishlist.items.length > 0">
    <button class="buy" (click)="moveAllToCart()" [disabled]="processing">MOVE ALL TO CART</button>
  </div>

  <div class="circle circle-two"></div>
</section>